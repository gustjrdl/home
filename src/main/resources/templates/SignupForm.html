<html layout:decorate="~{Layout}">

<body>
<div layout:fragment="content">
    <nav th:replace="SignNavBar :: SignNavBarFragment"></nav>
    <div style="0 auto 20px auto; font-weight:bold; font-size:30px; text-align:center;">회원가입</div>
    <div style="display:flex; justify-content:center;">
        <form th:action="@{/user/signup}" th:object="${userCreateForm}" id="signup" method ="post" style=" display:flex; justify-content:center; flex-wrap:wrap; width:330px;">

            <label for="username"></label>
            <input type="text" id="username" th:field="*{username}" placeholder="아이디를 입력 하세요" style="width:327px; height: 58px; border-radius:5px; border:1px solid gray; padding:10px; margin-bottom:30px; background-color:#f5f6f7; font-family: 'Do Hyeon', sans-serif;">
            <span th:if="${#fields.hasErrors('username')}" id="idError" th:each="err : ${#fields.errors('username')}"></span>
            <!--                    and #fields.errors('username').get(0).codes[0] == 'NotBlank'}-->
            <p ></p>

            <label for="password1"></label>
                <input type="password" id="password1" th:field="*{password1}"  placeholder="비밀번호를 입력 하세요" style="width:327px; height: 58px; border-radius:5px; border:1px solid gray; padding:10px; margin-bottom:30px; background-color:#f5f6f7; font-family: 'Do Hyeon', sans-serif;">
                <div th:if="${#fields.hasErrors('password1')}" style="margin-top:-30px;">
<!--                    <p th:errors="*{password1}" style="color:red; font-size:14px; font-family: 'Do Hyeon', sans-serif;"></p>-->
                </div>
                <label for="password2"></label>
                <input type="password" id="password2" th:field="*{password2}"  placeholder="비밀번호를 다시 한 번 입력하세요" style="width:327px; height: 58px; border-radius:5px; border:1px solid gray; padding:10px; margin-bottom:30px; background-color:#f5f6f7; font-family: 'Do Hyeon', sans-serif;">
                <div th:if="${#fields.hasErrors('password2')}" style="margin-top:-30px;">
<!--                    <p th:errors="*{password2}" style="color:red; font-size:14px; font-family: 'Do Hyeon', sans-serif;"></p>-->
                </div>
                <label for="email"></label>
                <input type="text" id="email" th:field="*{email}" placeholder="이메일을 입력 하세요" style="width:327px; height: 58px; border-radius:5px; border:1px solid gray; padding:10px; margin-bottom:30px; background-color:#f5f6f7; font-family: 'Do Hyeon', sans-serif;">
                <div th:if="${#fields.hasErrors('email')}" style="margin-top:-30px;">
<!--                    <p th:errors="*{email}" style="color:red; font-size:14px;  font-family: 'Do Hyeon', sans-serif;"></p>-->
                </div>
                <label for="nickname"></label>
                <input type="text" id="nickname" th:field="*{nickname}" placeholder="닉네임을 입력 하세요" style="width:327px; height: 58px; border-radius:5px; border:1px solid gray; padding:10px; margin-bottom:30px; background-color:#f5f6f7; font-family: 'Do Hyeon', sans-serif;">
                <div th:if="${#fields.hasErrors('nickname')}" style=" margin-top:-30px; padding:0; display:inline-block;">
<!--                    <div th:errors="*{nickname}" style="color:red; font-size:14px; font-family:'Do Hyeon', sans-serif; "></div>-->
                </div>
                <button class="btn" type="submit"  style=" margin-top:30px; width:300px; height: 58px; border-radius:5px; font-weight:bold;
                                        font-size: 30px; background-color:#00ce7c; font-family: 'Do Hyeon', sans-serif; color:white; padding:5px; " >회원가입
                </button>
        </form>
    </div>
    <script type="text/javascript">
    const form = document.getElementById('signup');

    document.addEventListener('DOMContentLoaded', function() {
        const idInput = document.getElementById('username');
        const idError = document.getElementById('idError');

        if (idInput && idError) {
            // 요소를 찾았으므로 이제 안전하게 작업을 수행할 수 있습니다.
        } else {
            console.log('요소를 찾을 수 없습니다.');
        }
    });

    idInput.addEventListener('input', function (e) {
        const idValue = idInput.value;

        // 실시간 아이디 유효성 검사를 수행
        if (idValue.length < 4) {
            idError.textContent = '아이디는 최소 4자 이상이어야 합니다.';
        } else {
            idError.textContent = ''; // 유효한 경우 에러 메시지 제거
        }
    });

    form.addEventListener('submit', function (event) {
        const idValue = idInput.value;

        // 폼을 제출할 때 다시 한 번 아이디 유효성 검사 수행
        if (idValue.length < 4) {
            idError.textContent = '아이디는 최소 4자 이상이어야 합니다.';
            event.preventDefault(); // 제출 중지
        }
    });

</script>
</div>

</body>
</html>

